<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>index</title>
  <script type="module" crossorigin src="/Keelung-test/assets/main-d89d9269.js"></script>
  <link rel="stylesheet" href="/Keelung-test/assets/main-3ec79a91.css">
</head>

<body>
  
    <div class="container-fluid p-0">

      <div class="keelung-title d-flex justify-content-between p-4 align-items-center">
        <h1 class="text-white">某某轉運站</h1>
        <div class="transportation-type text-white fs-2 position-relative" id="transportation-type">
          <p class="transportationList text-orange" id="transportationList1" data-content="bus">客運 BUS</p>
          <p class="transportationList" id="transportationList2" data-content="boats">國際航班 INTERNATIONAL ROUTE</p>
          <p class="transportationList" id="transportationList3" data-content="newtaiMa">國內航班 DOMESTIC ROUTE</p>
          <p class="transportationList" id="transportationList4" data-content="train">台鐵TRAIN</p>
        </div>
        <div class="text-white" id="date">
          <p class="fs-5">2024年05月10日</p>
          <p class="fs-3">11:26</p>
          <p class="fs-5">星期五 Friday</p>
        </div>
      </div>

      <!--1. bus -->
      <div id="bus" style="display:none;">
        <div class="bus-title p-4 d-flex justify-content-between text-white fs-4" id="bus-title"><span>客運資訊
            NAME</span><span>班次
            ROUTE</span><span>目的地DESTINATION</span><span>時間 TIME</span>
        </div>
        <!-- 輸入班次資訊 -->
        <div class="busList-wrap p-4">
          <div class="busList d-flex justify-content-between fs-5" id="busList1">
            <span>國光客運</span><span>1801</span><span>往三重(基隆-三重)</span><span>11:00</span>
          </div>
        </div>
        <div class="busList-wrap p-4">
          <div class="busList d-flex justify-content-between fs-5" id="busList2">
            <span>國光客運</span><span>1802</span><span>往三重(基隆-三重)</span><span>12:00</span>
          </div>
        </div>

        <div class="busList-wrap p-4">
          <div class="busList d-flex justify-content-between fs-5" id="busList3">
            <span>國光客運</span><span>1803</span><span>往三重(基隆-三重)</span><span>13:00</span>
          </div>
        </div>

        <div class="busList-wrap p-4">
          <div class="busList d-flex justify-content-between fs-5" id="busList4">
            <span>國光客運</span><span>1804</span><span>往三重(基隆-三重)</span><span>14:00</span>
          </div>
        </div>

        <div class="busList-wrap p-4">
          <div class="busList d-flex justify-content-between fs-5" id="busList5">
            <span>國光客運</span><span>1805</span><span>往三重(基隆-三重)</span><span>15:00</span>
          </div>
        </div>


      </div>


      <!--2. tai Ma -->
      <div id="newtaiMa" style="display:none;">
        <div class="title-medium fs-3 pt-3"><span>新臺馬輪</span><span>|</span><span>航運資訊</span></div>
        <div class="newtaiMa-title p-4 d-flex justify-content-between fs-4"><span>車次 TRAIN</span><span>時間
            TIME</span><span>開往 TO</span><span>車種 TYPE</span><span>經由 VIA</span><span>備註
            REMARK</span>
        </div>
        <div class="p-4 newtaiMa-wrap text-white">
          <div class="newtaiMaList d-flex justify-content-between fs-5" id="newtaiMa1"><span>新臺馬輪1
            </span><span>新臺馬輪1</span><span>掛靠港</span><span>2024-05-12</span><span>2024-05-13</span><span>西03</span>
          </div>
        </div>
        <div class="p-4 newtaiMa-wrap text-white">
          <div class="newtaiMaList d-flex justify-content-between fs-5" id="newtaiMa2"><span>新臺馬輪1
            </span><span>新臺馬輪2</span><span>掛靠港</span><span>2024-05-13</span><span>2024-05-14</span><span>西03</span>
          </div>
        </div>
        <div class="p-4 newtaiMa-wrap text-white">
          <div class="newtaiMaList d-flex justify-content-between fs-5" id="newtaiMa3"><span>新臺馬輪1
            </span><span>新臺馬輪3</span><span>掛靠港</span><span>2024-05-14</span><span>2024-05-15</span><span>西03</span>
          </div>
        </div>
        <div class="p-4 newtaiMa-wrap text-white">
          <div class="newtaiMaList d-flex justify-content-between fs-5" id="newtaiMa4"><span>新臺馬輪
            </span><span>新臺馬輪4</span><span>掛靠港</span><span>2024-05-15</span><span>2024-05-16</span><span>西03</span>
          </div>
        </div>
        <div class="p-4 newtaiMa-wrap text-white">
          <div class="newtaiMaList d-flex justify-content-between fs-5" id="newtaiMa5"><span>新臺馬輪1
            </span><span>新臺馬輪5</span><span>掛靠港</span><span>2024-05-16</span><span>2024-05-17</span><span>西03</span>
          </div>
        </div>

      </div>

      <!--3. boats -->
      <div id="boats" style="display:none;">
        <div class="fs-3 pt-3"><span>基隆港郵輪船舶</span><span>|</span><span>航班資訊</span>
          <div class="boats-title p-4 d-flex justify-content-between text-white fs-4">
            <span>航名 NAME</span><span>郵輪公司</span><span>運作模式</span><span>到港時間</span><span>離港時間</span><span>碼頭</span>
          </div>
          <div class="p-4 boatsList-wrap">
            <div class="boatsList d-flex justify-content-between fs-5" id="boatsList1"><span>歌詩達莎倫娜 Costa Serena1
              </span><span>歌詩達郵輪1</span><span>掛靠港</span><span>2024-05-12</span><span>2024-05-13</span><span>西03</span>
            </div>
          </div>
          <div class="p-4 boatsList-wrap">
            <div class="boatsList d-flex justify-content-between fs-5" id="boatsList2"><span>歌詩達莎倫娜 Costa Serena2
              </span><span>歌詩達郵輪2</span><span>掛靠港</span><span>2024-05-13</span><span>2024-05-14</span><span>西03</span>
            </div>
          </div>
          <div class="p-4 boatsList-wrap">
            <div class="boatsList d-flex justify-content-between fs-5" id="boatsList3"><span>歌詩達莎倫娜 Costa Serena3
              </span><span>歌詩達郵輪3</span><span>掛靠港</span><span>2024-05-14</span><span>2024-05-15</span><span>西03</span>
            </div>
          </div>
          <div class="p-4 boatsList-wrap">
            <div class="boatsList d-flex justify-content-between fs-5" id="boatsList4"><span>歌詩達莎倫娜 Costa Serena4
              </span><span>歌詩達郵輪4</span><span>掛靠港</span><span>2024-05-15</span><span>2024-05-16</span><span>西03</span>
            </div>
          </div>
          <div class="p-4 boatsList-wrap">
            <div class="boatsList d-flex justify-content-between fs-5" id="boatsList5"><span>歌詩達莎倫娜 Costa Serena5
              </span><span>歌詩達郵輪5</span><span>掛靠港</span><span>2024-05-16</span><span>2024-05-17</span><span>西03</span>
            </div>
          </div>

        </div>
      </div>

      <!--4.train -->
      <div class="train" id="train" style="display:none;">
        <div><span>基隆火車站</span><span>|</span><span>台鐵列車即時資訊</span>
          <div class="train-title p-4 d-flex justify-content-between text-white fs-4">
            <span>車次 TRAIN</span><span>時間 TIME</span><span>開往 TO</span><span>經由 VIA</span><span>備註 REMARK</span>
          </div>
          <div class="p-4 trainList-wrap">
            <div class="trainList d-flex justify-content-around fs-5" id="trainList1">
              <span>1251</span><span>19:41</span><span>三義</span><span>區間</span><span>山線</span><span>準點</span>
            </div>
          </div>
          <div class="p-4 trainList-wrap">
            <div class="trainList d-flex justify-content-around fs-5" id="trainList2">
              <span>1252</span><span>19:42</span><span>三義</span><span>區間</span><span>山線</span><span>準點</span>
            </div>
          </div>
          <div class="p-4 trainList-wrap">
            <div class="trainList d-flex justify-content-around fs-5" id="trainList3">
              <span>1253</span><span>19:43</span><span>新竹</span><span>區間</span><span>山線</span><span>準點</span>
            </div>
          </div>
          <div class="p-4 trainList-wrap">
            <div class="trainList d-flex justify-content-around fs-5" id="trainList4">
              <span>1254</span><span>19:44</span><span>高雄</span><span>區間</span><span>山線</span><span>準點</span>
            </div>
          </div>
          <div class="p-4 trainList-wrap">
            <div class="trainList d-flex justify-content-around fs-5" id="trainList5">
              <span>1255</span><span>19:45</span><span>台中</span><span>區間</span><span>山線</span><span>準點</span>
            </div>
          </div>

        </div>

      </div>



      <!-- marquee -->
<div class="contianer-fluid speaker d-flex align-items-center">

    <div class="speaker-content-wrap">
        <p class="speaker-content ticker-item text-white m-0" id="marqueeContainer"><canvas id="marqueeCanvas"></canvas>
        </p>
    </div>        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.8/axios.min.js"></script>
        
        <script>
          //transportation carousel
          let transportationLength = $(".transportationList").length;
          let a = 0;
          let b = 0;
          let c = 0;
          let d = 0;
          function transportationShift() {
            a = (transportationLength + a + 1) % transportationLength;   //取餘數
            b = (transportationLength + a + 2) % transportationLength;
            c = (transportationLength + a + 3) % transportationLength;
            d = (transportationLength + a + 5) % transportationLength;

            $('.transportationList').removeClass("text-orange");
            $(`#transportationList${a + 1}`).addClass("text-orange");

            $(`#transportationList${a + 1}`).removeClass("position-top5 position-top70 position-top120 position-top150");
            $(`#transportationList${a + 1}`).addClass("position-top5");

            const dataContentValueA1 = $(`#transportationList${a + 1}`).data("content");  //use.data to get the data- value1
            const dataContentValueB1 = $(`#transportationList${b + 1}`).data("content");
            const dataContentValueC1 = $(`#transportationList${c + 1}`).data("content");
            const dataContentValueD1 = $(`#transportationList${d + 1}`).data("content");

            $(`#${dataContentValueA1}`).css("display", "block");
            $(`#${dataContentValueB1}`).css("display", "none");
            $(`#${dataContentValueC1}`).css("display", "none");
            $(`#${dataContentValueD1}`).css("display", "none");
            console.log(`a + 1為${a + 1}` + `a + 1的data屬性為${dataContentValueA1}`);

            console.log(`b + 1為${b + 1}`);
            $(`#transportationList${b + 1}`).removeClass("position-top5 position-top70 position-top120 position-top150");
            $(`#transportationList${b + 1}`).addClass("position-top70");


            console.log(`b + 1為${b + 1}` + `b + 1的data屬性為${dataContentValueB1}`);

            console.log(`c + 1為${c + 1}`);
            $(`#transportationList${c + 1}`).removeClass("position-top5 position-top70 position-top120 position-top150");
            $(`#transportationList${c + 1}`).addClass("position-top120");


            console.log(`c + 1為${c + 1}` + `c + 1的data屬性為${dataContentValueC1}`);

            console.log(`d + 1為${d + 1}`);
            $(`#transportationList${d + 1}`).removeClass("position-top5 position-top70 position-top120 position-top150");
            $(`#transportationList${d + 1}`).addClass("position-top150");


            console.log(`d + 1為${d + 1}` + `d + 1的data屬性為${dataContentValueD1}`);


          }
          setInterval(transportationShift, 3000);


          //bus-carousel
          // let busLength = $(".transportationList").length;   //4
          // let i = 0;

          // function shiftBus() {
          //   i = (busLength + i + 1) % busLength;   //取餘數
          //   $('.busList').css("display", "none");  //use .css not.attr, or it will Error(but the chrome will not show)!
          //   $(`#busList${i + 1}`).attr("style", "dislay:block");
          //   console.log(`取餘數${i}`);
          // }

          // setInterval(shiftBus, 2000);

          let busLength = $(".busList").length;

          for (let i = 0; i < busLength + 1; i++) {
            setTimeout(function () {
              $(`#busList${i}`).addClass("bus-slide");
              console.log(i);
            }, i * 400);
          }

          //boats-carousel
          let boatsListLength = $('.boatsList').length;

          for (let e = 0; e < boatsListLength + 1; e++) {
            setTimeout(function () {
              $(`#boatsList${e}`).addClass("boats-slide");
              console.log(e);
            }, e * 400);
          }

          //train-carousel
          let tainListLength = $('.trainList').length;

          for (let f = 0; f < tainListLength + 1; f++) {
            setTimeout(function () {
              $(`#trainList${f}`).addClass("train-slide");
              console.log(f);
            }, f * 400);
          }

          //API

          // const client_id = 'service-99bf4047-07a1-45bc';
          // const client_secret = '0ab27e10-2f7d-47f7-a471-71c24cce7474';


          // function getBusResult() {
          //   axios.get(`https://tdx.transportdata.tw/api/basic/v2/Bus/RealTimeByFrequency/Streaming/InterCity?%24filter=1802&%24top=30&%24format=JSON`, {
          //     headers: getAuthorizationHeader()
          //   })
          //     .then(response => {
          //       console.log('Data:', response.data);
          //     })
          //     .catch(error => {
          //       console.error('Error:', error);
          //     })
          // }

          // function busDataPeriodically() {
          //   getBusResult();
          //   setTimeout(busDataPeriodically, 2000);
          // }

          // function getAuthorizationHeader() {
          //   // const tdx = new TDX(client_id, client_secret);
          //   //  填入自己 ID、KEY 開始 這裡沒用好
          //   return {
          //     'Authorization': `Basic ${btoa(`${client_id}:${client_secret}`)}`
          //   };
          // }

          // busDataPeriodically();

          //跑馬燈
          const marqueeContainer = document.getElementById('marqueeContainer');
          const canvas = document.getElementById('marqueeCanvas');
          const ctx = canvas.getContext('2d');
          const marqueeText = '親愛的乘客們，1813號公車將於5分鐘內抵達，請要搭乘的乘客盡快前往月台候車。';
          const textColor = '#FFFFFF';
          const backgroundColor = '#54585A';
          const fontSize = 1; // 使用相對大小，這裡是相對於螢幕寬度的百分比

          canvas.width = marqueeContainer.clientWidth;
          canvas.height = marqueeContainer.clientHeight;

          ctx.font = `${fontSize}vw Arial`; // 使用 vw 單位
          ctx.fillStyle = textColor;

          function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const textWidth = ctx.measureText(marqueeText).width;
            const xPos = (canvas.width - textWidth) / 2; // 計算文字的 x 位置使其置中
            const yPos = fontSize + canvas.height / 2;

            ctx.fillText(marqueeText, draw.position + xPos, yPos);

            draw.position -= 1;  //speed

            if (draw.position < -textWidth) {
              draw.position = canvas.width;
            }

            requestAnimationFrame(draw);
          }

          draw.position = canvas.width;

          draw();

        </script>
</body>

</html>